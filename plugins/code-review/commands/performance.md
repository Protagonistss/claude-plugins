# Command: /performance

专门进行代码性能分析，识别性能瓶颈和优化机会。

## 描述

/performance 命令使用性能分析专家代理，深入分析代码的运行效率、资源使用情况和潜在的性能瓶颈。

## 用法

```
/performance [target] [options]
```

### 参数

- `target` - 分析目标（文件路径、目录或代码片段）
- `--metrics` - 性能指标收集（cpu, memory, io, network）
- `--benchmark` - 基准测试对比
- `--profiling` - 性能分析深度

## 性能分析维度

### 算法效率
- 时间复杂度分析
- 空间复杂度评估
- 数据结构选择优化
- 循环和递归优化

### 资源使用
- 内存占用分析
- CPU使用率检查
- I/O操作优化
- 网络请求效率

### 缓存策略
- 缓存命中率
- 缓存失效策略
- 内存泄漏检查
- 资源释放分析

### 并发性能
- 线程安全检查
- 锁竞争分析
- 异步处理优化
- 并发模式改进

## 示例

```
/performance src/algorithms/
/performance --metrics cpu,memory data-processing.js
/performance --benchmark sorting.js
```

## 性能报告示例

```markdown
# 性能分析报告

## 性能概览
- **时间复杂度**: O(n²) → 可优化至 O(n log n)
- **内存使用**: 85MB (峰值 120MB)
- **CPU使用**: 平均 45% (峰值 78%)
- **性能评分**: 6.5/10

## 🚀 主要优化机会

### 1. 算法优化 (预计提升80%)
**当前**: 嵌套循环 O(n²)
**建议**: 使用哈希表 O(n)

### 2. 内存优化 (预计减少40%内存)
**问题**: 大对象频繁创建
**建议**: 对象池模式
```

## 性能优化建议

1. **热点代码优化**：优先优化执行频率高的代码
2. **批处理优化**：减少小批量操作的次数
3. **缓存策略**：合理使用内存缓存和分布式缓存
4. **异步处理**：使用异步I/O提升并发性能